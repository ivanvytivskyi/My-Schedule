<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ivan's Schedule V4.1 - Dec 8-14, 2025 (Final Rota)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding-bottom: 70px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .header h1 {
            color: #667eea;
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 16px;
        }

        .version-badge {
            display: inline-block;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }

        .exam-countdown {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .countdown-box {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 15px;
            border-radius: 10px;
            color: white;
            text-align: center;
        }

        .countdown-box.math {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .countdown-box h3 {
            font-size: 14px;
            margin-bottom: 5px;
            opacity: 0.9;
        }

        .countdown-box .time {
            font-size: 24px;
            font-weight: bold;
        }

        /* Day Navigation */
        .day-nav-container {
            background: white;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
        }

        .day-nav-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-arrow {
            background: #667eea;
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .nav-arrow:hover {
            background: #5568d3;
            transform: scale(1.1);
        }

        .nav-arrow:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: scale(1);
        }

        .day-tabs-container {
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            flex: 1;
        }

        .day-tabs-container::-webkit-scrollbar {
            display: none;
        }

        .day-tabs {
            display: flex;
            gap: 10px;
            min-width: min-content;
        }

        .day-tab {
            background: #f5f5f5;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            flex-shrink: 0;
            border: 2px solid transparent;
        }

        .day-tab:hover {
            background: #e8e8e8;
        }

        .day-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .day-tab .day-name {
            font-weight: bold;
            font-size: 14px;
        }

        .day-tab .day-date {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 2px;
        }

        /* Content Area */
        .content {
            display: none;
        }

        .content.active {
            display: block;
        }

        .day-content {
            display: none;
        }

        .day-content.active {
            display: block;
        }

        .day-header {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .day-header h2 {
            color: #667eea;
            font-size: 24px;
            margin-bottom: 5px;
        }

        .day-header .subtitle {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .day-header .motivation {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 12px;
            border-radius: 8px;
            color: #2d3436;
            font-size: 14px;
            margin-top: 10px;
        }

        .time-block {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .time-block.current-time {
            background: #FFF3E0;
            border-left: 4px solid #FF6B35;
            box-shadow: 0 2px 8px rgba(255, 107, 53, 0.2);
        }

        .time-block.past-time {
            opacity: 0.6;
        }

        .time-block .time {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .time-block .title {
            font-size: 18px;
            color: #2d3436;
            font-weight: bold;
            margin: 10px 0;
        }

        .time-block .tasks {
            margin: 15px 0;
        }

        .task-item {
            display: flex;
            align-items: flex-start;
            margin: 8px 0;
            gap: 10px;
        }

        .task-item input[type="checkbox"] {
            margin-top: 3px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .task-item label {
            flex: 1;
            cursor: pointer;
            line-height: 1.6;
        }

        .task-item input[type="checkbox"]:checked + label {
            text-decoration: line-through;
            opacity: 0.6;
        }

        .food, .note {
            margin: 10px 0;
            padding: 12px;
            border-radius: 8px;
            font-size: 14px;
        }

        .food {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .note {
            background: #fff3e0;
            color: #e65100;
        }

        /* Shopping Tab */
        .shopping-content {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .shopping-content h2 {
            color: #667eea;
            font-size: 24px;
            margin-bottom: 20px;
        }

        .budget-info {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .budget-info h3 {
            font-size: 18px;
            color: #2d3436;
        }

        .shopping-section {
            margin: 30px 0;
        }

        .shopping-section h3 {
            color: #667eea;
            font-size: 20px;
            margin-bottom: 15px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .shopping-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: grid;
            gap: 5px;
        }

        .shopping-item:last-child {
            border-bottom: none;
        }

        .item-name {
            font-weight: bold;
            color: #2d3436;
            font-size: 16px;
        }

        .item-quantity {
            color: #667eea;
            font-size: 14px;
        }

        .item-reason {
            color: #666;
            font-size: 13px;
            font-style: italic;
        }

        .skip-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            margin: 8px 0;
            border-left: 4px solid #28a745;
        }

        .skip-item .item-name {
            color: #28a745;
        }

        /* Leftover Predictions Table */
        .leftover-predictions {
            margin-top: 30px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
        }

        .leftover-predictions h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .predictions-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }

        .predictions-table th,
        .predictions-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .predictions-table th {
            background: #667eea;
            color: white;
            font-weight: bold;
        }

        .predictions-table tr:last-child td {
            border-bottom: none;
        }

        .next-update {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin-top: 15px;
            font-weight: bold;
        }

        /* Recipes Tab */
        .recipes-content {
            display: grid;
            gap: 20px;
        }

        .recipe-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .recipe-card h3 {
            color: #667eea;
            font-size: 22px;
            margin-bottom: 15px;
        }

        .recipe-meta {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .meta-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            font-size: 13px;
        }

        .meta-item strong {
            display: block;
            color: #667eea;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .ingredients, .instructions {
            margin: 20px 0;
        }

        .ingredients h4, .instructions h4 {
            color: #2d3436;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .ingredients ul, .instructions ol {
            margin-left: 20px;
        }

        .ingredients li, .instructions li {
            margin: 5px 0;
            line-height: 1.6;
        }

        .recipe-video {
            margin-top: 15px;
        }

        .recipe-video a {
            display: inline-block;
            background: #ff0000;
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .recipe-video a:hover {
            background: #cc0000;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 0, 0, 0.3);
        }

        .recipe-notes {
            background: #fff3e0;
            padding: 12px;
            border-radius: 8px;
            color: #e65100;
            margin-top: 15px;
            font-size: 14px;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.2);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 1000;
        }

        .nav-item {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            background: none;
            color: #666;
        }

        .nav-item:hover {
            background: #f5f5f5;
        }

        .nav-item.active {
            color: #667eea;
            font-weight: bold;
        }

        .nav-item .icon {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .nav-item .label {
            font-size: 12px;
        }

        /* Scroll to Top Button */
        .scroll-top {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 56px;
            height: 56px;
            background: #FF6B35;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.4);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 999;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .scroll-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .scroll-top:hover {
            background: #e85a2a;
            transform: translateY(-5px);
        }

        /* Mobile Responsive */
        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 24px;
            }

            .day-tab {
                padding: 10px 15px;
            }

            .recipe-meta {
                grid-template-columns: 1fr;
            }

            .exam-countdown {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Ivan's Weekly Schedule <span class="version-badge">V4.1</span></h1>
            <p>December 8-14, 2025 ‚Ä¢ **Final Rota & Rule Compliance** üö¥</p>
            
            <div class="exam-countdown">
                <div class="countdown-box">
                    <h3>üìù English Exam (Done!)</h3>
                    <div class="time" id="englishCountdown">Completed! üéâ</div>
                </div>
                <div class="countdown-box math">
                    <h3>üìê Math Exam</h3>
                    <div class="time" id="mathCountdown">Loading...</div>
                </div>
            </div>
        </div>

        <div class="day-nav-container">
            <div class="day-nav-wrapper">
                <button class="nav-arrow" id="prevDay">‚Äπ</button>
                <div class="day-tabs-container">
                    <div class="day-tabs">
                        <div class="day-tab" data-day="monday">
                            <div class="day-name">Monday</div>
                            <div class="day-date">Dec 8</div>
                        </div>
                        <div class="day-tab" data-day="tuesday">
                            <div class="day-name">Tuesday</div>
                            <div class="day-date">Dec 9</div>
                        </div>
                        <div class="day-tab" data-day="wednesday">
                            <div class="day-name">Wednesday</div>
                            <div class="day-date">Dec 10</div>
                        </div>
                        <div class="day-tab" data-day="thursday">
                            <div class="day-name">Thursday</div>
                            <div class="day-date">Dec 11</div>
                        </div>
                        <div class="day-tab" data-day="friday">
                            <div class="day-name">Friday</div>
                            <div class="day-date">Dec 12</div>
                        </div>
                        <div class="day-tab" data-day="saturday">
                            <div class="day-name">Saturday</div>
                            <div class="day-date">Dec 13</div>
                        </div>
                        <div class="day-tab" data-day="sunday">
                            <div class="day-name">Sunday</div>
                            <div class="day-date">Dec 14</div>
                        </div>
                    </div>
                </div>
                <button class="nav-arrow" id="nextDay">‚Ä∫</button>
            </div>
        </div>

        <div class="content active" id="scheduleContent">
            </div>

        <div class="content" id="shoppingContent">
            </div>

        <div class="content" id="recipesContent">
            </div>
    </div>

    <div class="bottom-nav">
        <button class="nav-item active" data-tab="schedule">
            <div class="icon">üìÖ</div>
            <div class="label">Schedule</div>
        </button>
        <button class="nav-item" data-tab="shopping">
            <div class="icon">üõí</div>
            <div class="label">Shopping</div>
        </button>
        <button class="nav-item" data-tab="recipes">
            <div class="icon">üë®‚Äçüç≥</div>
            <div class="label">Recipes</div>
        </button>
    </div>

    <button class="scroll-top" id="scrollTop">‚Üë</button>

    <script id="systemInstructions" type="application/json">
    {
        "version": "4.1",
        "lastUpdated": "2025-12-08",
        "instructions": "Strict compliance with 07:00 wake, 30-min routine, 30-min Bike ride travel, and 'Straight to Bed' rule for late shifts. Hindi now 10 min daily on non-late-shift nights."
    }
    </script>

    <script>
        const scheduleData = {
            "metadata": {
                "owner": "Ivan",
                "generated": "2025-12-08",
                "period": "December 8-14, 2025",
                "version": "4.1 (Final Rota & Rules)",
                "foodInventory": {
                    "lastUpdate": "2025-12-08",
                    "current": {
                        "eggs": 8,
                        "pasta": "1000g",
                        "bananas": 0,
                        "milk": "2000ml",
                        "chicken": "0g (fresh/frozen)",
                        "bread": "0 loaves"
                    },
                    "predictedLeftovers": {
                        "eggs": "0 (used all 8 old eggs, used 6 new eggs)",
                        "pasta": "~700g (still lots!)",
                        "bananas": "0",
                        "milk": "~1300ml",
                        "chicken": "0g",
                        "bread": "0"
                    }
                }
            },
            "exams": {
                "english": {
                    "date": "2025-12-11T09:30:00",
                    "name": "Functional Skills English Level 1"
                },
                "math": {
                    "date": "2025-12-16T09:30:00",
                    "name": "Functional Skills Math Level 1"
                }
            },
            "days": {
                // MONDAY, DECEMBER 8
                "monday": {
                    "date": "2025-12-08",
                    "title": "Monday December 8",
                    "subtitle": "Day Off - Max Math Prep + Shopping!",
                    "motivation": "üéØ Use this day to shop, study Math, and get organized for the week!",
                    "blocks": [
                        {
                            "time": "07:00-07:30",
                            "title": "üåÖ Morning Routine (30 min)",
                            "tasks": [
                                "Wake at 07:00",
                                "Shower",
                                "Get dressed"
                            ],
                            "note": "‚úÖ Must keep routine to 30 minutes! Phone away by 22:00."
                        },
                        {
                            "time": "07:30-08:00",
                            "title": "üç≥ Breakfast",
                            "tasks": [
                                "Scrambled eggs (2 eggs)",
                                "Toast with PB",
                                "Water"
                            ],
                            "food": "üçΩÔ∏è Eggs + Toast (using leftovers!)"
                        },
                        {
                            "time": "08:00-09:30",
                            "title": "üìö Math Study: Key Concepts",
                            "tasks": [
                                "Review formulas and main topics",
                                "Practice geometry problems"
                            ],
                            "note": "üí° Light exercise break at 09:00 (5 min)"
                        },
                        {
                            "time": "09:30-10:30",
                            "title": "üõí Shopping Time",
                            "tasks": [
                                "Walk to Tesco/Asda",
                                "Buy only what's on list!",
                                "Budget ¬£5-20",
                                "Find Alarm Clock"
                            ],
                            "note": "‚ö†Ô∏è CRITICAL: Must buy alarm clock today!"
                        },
                        {
                            "time": "10:30-12:00",
                            "title": "üìö Math Study: Practice Exam",
                            "tasks": [
                                "Timed practice section (60 min)",
                                "Review errors"
                            ]
                        },
                        {
                            "time": "12:00-13:00",
                            "title": "üçù Lunch (Portion Control)",
                            "tasks": [
                                "Cook Simple Pasta (150g from 1kg supply)",
                                "Cook for 2, eat half today, save half for next meal",
                                "Eat Banana (1 of 5 new)"
                            ],
                            "food": "üçΩÔ∏è Pasta + Sauce"
                        },
                        {
                            "time": "13:00-17:00",
                            "title": "üíª Web Development Session (4 hours)",
                            "tasks": [
                                "Web dev project work (90 min)",
                                "Light exercise/scroll break (30 min)",
                                "Web dev project work (90 min)",
                                "Total 3 hours of 5-hour goal done today!"
                            ],
                            "note": "üéØ Focus on reducing waste of time on scrolling. Goal: 1-2 hours screentime for scrolling/leisure."
                        },
                        {
                            "time": "17:00-19:00",
                            "title": "üìê Math Study: Focused Practice",
                            "tasks": [
                                "Focus on weak areas identified in practice exam",
                                "Go over word problems"
                            ]
                        },
                        {
                            "time": "19:00-20:00",
                            "title": "Dinner (Portion Control)",
                            "tasks": [
                                "Cook Chicken (New)",
                                "Simple rice or veg side",
                                "Cook for 2, eat half today, save half for Thursday dinner"
                            ],
                            "food": "üçΩÔ∏è Chicken meal (New Chicken!)"
                        },
                        {
                            "time": "20:00-22:00",
                            "title": "‚úÖ Prepare for tomorrow / Chill",
                            "tasks": [
                                "Set out clothes and uniform",
                                "Review Math notes for Tuesday College"
                            ]
                        },
                        {
                            "time": "22:00-22:30",
                            "title": "üåô Evening Routine",
                            "tasks": [
                                "Brush teeth",
                                "Set NEW ALARM CLOCK!",
                                "Phone in different room (22:00 rule!)"
                            ]
                        },
                        {
                            "time": "22:50-23:00",
                            "title": "üó£Ô∏è Hindi Practice",
                            "tasks": [
                                "10 minutes of vocabulary review (Goal: 1/7)"
                            ]
                        },
                        {
                            "time": "23:00",
                            "title": "üò¥ Sleep",
                            "tasks": [
                                "Lights out at 23:00",
                                "8 hours sleep"
                            ]
                        }
                    ]
                },
                // TUESDAY, DECEMBER 9
                "tuesday": {
                    "date": "2025-12-09",
                    "title": "Tuesday December 9",
                    "subtitle": "College Math + Late Work Shift",
                    "motivation": "üí™ Normal college day + long work shift. Stay focused!",
                    "blocks": [
                        {
                            "time": "07:00-07:30",
                            "title": "üåÖ Morning Routine (30 min)",
                            "tasks": [
                                "Wake with ALARM CLOCK!",
                                "Shower",
                                "Get dressed"
                            ],
                            "note": "üí° First day with new alarm!"
                        },
                        {
                            "time": "07:30-08:00",
                            "title": "üç≥ Breakfast",
                            "tasks": [
                                "Scrambled eggs (2 eggs)",
                                "Toast",
                                "Eat Banana (2 of 5 new)"
                            ],
                            "food": "üçΩÔ∏è Eggs + toast (using leftovers!)"
                        },
                        {
                            "time": "08:00-08:55",
                            "title": "üìö Quick Review / Prep",
                            "tasks": [
                                "Final look at Math notes",
                                "Pack college bag"
                            ]
                        },
                        {
                            "time": "08:55-09:25",
                            "title": "üö¥ Bike to College",
                            "tasks": [
                                "30-minute BIKE ride",
                                "Arrive 09:25 (5 min early!)"
                            ],
                            "note": "‚úÖ Bike ride rule enforced."
                        },
                        {
                            "time": "09:30-11:30",
                            "title": "üèõÔ∏è College: Functional Skills Math",
                            "tasks": [
                                "Take notes",
                                "Ask questions about the exam"
                            ]
                        },
                        {
                            "time": "11:30-12:00",
                            "title": "üö¥ Bike Home",
                            "tasks": [
                                "30-minute BIKE ride"
                            ]
                        },
                        {
                            "time": "12:00-13:00",
                            "title": "üçù Lunch (Leftovers)",
                            "tasks": [
                                "Leftover Simple Pasta (150g from 1kg supply)",
                                "Water"
                            ],
                            "food": "üçΩÔ∏è Pasta leftovers"
                        },
                        {
                            "time": "13:00-16:00",
                            "title": "üìù English & Math Review",
                            "tasks": [
                                "Light English review (1 hour)",
                                "Math practice problems (2 hours)"
                            ]
                        },
                        {
                            "time": "16:00-16:44",
                            "title": "üëî Get Ready for Work",
                            "tasks": [
                                "Change into uniform",
                                "Pack water and snack"
                            ]
                        },
                        {
                            "time": "16:44-16:57",
                            "title": "üö∂ Walk to Work",
                            "tasks": [
                                "13-minute walk",
                                "Arrive 16:57 for 17:00 start (3 min early!)"
                            ]
                        },
                        {
                            "time": "17:00-23:30",
                            "title": "üíº Work Shift: Nando's",
                            "tasks": [
                                "6.5-hour shift"
                            ],
                            "food": "üçΩÔ∏è Staff meal (FREE!)"
                        },
                        {
                            "time": "23:30-23:43",
                            "title": "üö∂ Walk Home",
                            "tasks": [
                                "13-minute walk"
                            ]
                        },
                        {
                            "time": "23:43-23:53",
                            "title": "üöø Quick Shower (10 min)",
                            "tasks": [
                                "Must shower after work!",
                                "Set alarms"
                            ],
                            "note": "‚ùå NO HINDI: 'Straight to Bed' rule enforced for late arrival."
                        },
                        {
                            "time": "23:53-00:00",
                            "title": "üò¥ Wind Down & Sleep",
                            "tasks": [
                                "Phone away at 22:00, or immediately upon arrival",
                                "Lights out (later start due to late shift!)"
                            ]
                        }
                    ]
                },
                // WEDNESDAY, DECEMBER 10
                "wednesday": {
                    "date": "2025-12-10",
                    "title": "Wednesday December 10",
                    "subtitle": "Work Day - Focused Morning Study",
                    "motivation": "üìù Work in the afternoon. Crush English prep in the morning ‚Äì tomorrow is exam day!",
                    "blocks": [
                        {
                            "time": "07:00-07:30",
                            "title": "üåÖ Morning Routine (30 min)",
                            "tasks": [
                                "Wake with alarm clock",
                                "Shower",
                                "Get ready"
                            ]
                        },
                        {
                            "time": "07:30-08:00",
                            "title": "üç≥ Breakfast",
                            "tasks": [
                                "Scrambled eggs (2 eggs)",
                                "Toast",
                                "Eat Banana (3 of 5 new)"
                            ],
                            "food": "üçΩÔ∏è Eggs + toast (using leftovers!)"
                        },
                        {
                            "time": "08:00-10:00",
                            "title": "üìö Light English Review",
                            "tasks": [
                                "Review key points (don't cram!)",
                                "Calm confidence building",
                                "Organize materials for tomorrow"
                            ],
                            "note": "üí° LIGHT review only! You're ready!"
                        },
                        {
                            "time": "10:00-11:30",
                            "title": "üìê Math Study",
                            "tasks": [
                                "Practice speed and accuracy with basic arithmetic",
                                "Review calculator use"
                            ]
                        },
                        {
                            "time": "11:30-11:44",
                            "title": "üëî Get Ready for Work",
                            "tasks": [
                                "Change into uniform",
                                "Pack water and snack"
                            ]
                        },
                        {
                            "time": "11:44-11:57",
                            "title": "üö∂ Walk to Work",
                            "tasks": [
                                "13-minute walk",
                                "Arrive 11:57 for 12:00 start (3 min early!)"
                            ]
                        },
                        {
                            "time": "12:00-21:00",
                            "title": "üíº Work Shift: Nando's",
                            "tasks": [
                                "9-hour shift"
                            ],
                            "food": "üçΩÔ∏è Staff meal (FREE!)"
                        },
                        {
                            "time": "21:00-21:13",
                            "title": "üö∂ Walk Home",
                            "tasks": [
                                "13-minute walk"
                            ]
                        },
                        {
                            "time": "21:13-21:23",
                            "title": "üöø Quick Shower (10 min)",
                            "tasks": [
                                "Must shower after work!"
                            ]
                        },
                        {
                            "time": "21:23-22:30",
                            "title": "üìù Final Exam Prep / Chill",
                            "tasks": [
                                "Lay out exam clothes, pens, ID",
                                "Light snack if hungry"
                            ],
                            "note": "üí° Get a good 8-hour sleep! This is key."
                        },
                        {
                            "time": "22:50-23:00",
                            "title": "üó£Ô∏è Hindi Practice",
                            "tasks": [
                                "10 minutes of vocabulary review (Goal: 2/7)"
                            ]
                        },
                        {
                            "time": "23:00",
                            "title": "üò¥ Sleep",
                            "tasks": [
                                "Lights out at 23:00"
                            ]
                        }
                    ]
                },
                // THURSDAY, DECEMBER 11 (EXAM DAY)
                "thursday": {
                    "date": "2025-12-11",
                    "title": "Thursday December 11 - ENGLISH EXAM!",
                    "subtitle": "Exam Morning + Full Afternoon Math/Goals (NO WORK)",
                    "motivation": "üìù Trust your preparation! Today is your exam, followed by a full day of study/goals!",
                    "blocks": [
                        {
                            "time": "07:00-07:30",
                            "title": "üåÖ Morning Routine (30 min)",
                            "tasks": [
                                "Wake with alarm clock",
                                "Shower",
                                "Get dressed"
                            ]
                        },
                        {
                            "time": "07:30-08:00",
                            "title": "üç≥ Brain Fuel Breakfast",
                            "tasks": [
                                "Scrambled eggs (2 eggs)",
                                "Toast",
                                "Eat Banana (4 of 5 new)",
                                "Drink water calmly"
                            ],
                            "food": "üçΩÔ∏è Brain-power breakfast! (using leftovers!)"
                        },
                        {
                            "time": "08:00-08:30",
                            "title": "üìù Final Check & Prep",
                            "tasks": [
                                "Pack pens, pencils, ID",
                                "Light review (5-10 min MAX)",
                                "Positive affirmations"
                            ],
                            "note": "üí° You know this! Trust yourself!"
                        },
                        {
                            "time": "08:30-09:00",
                            "title": "üö¥ Bike to College (Exam)",
                            "tasks": [
                                "30-minute BIKE ride",
                                "Arrive 09:00 (30 min early!)",
                                "Find exam room, settle nerves"
                            ],
                            "note": "‚úÖ Bike ride rule enforced."
                        },
                        {
                            "time": "09:30-11:30",
                            "title": "üìù ENGLISH EXAM",
                            "tasks": [
                                "Read questions carefully",
                                "Manage time wisely"
                            ],
                            "note": "üí™ Trust your preparation!"
                        },
                        {
                            "time": "11:30-12:00",
                            "title": "üéâ EXAM DONE! / Bike Home",
                            "tasks": [
                                "Deep breath - you did it!",
                                "Bike home (30 min)"
                            ],
                            "note": "ü•≥ Focus on Math now!"
                        },
                        {
                            "time": "12:00-13:00",
                            "title": "üçù Lunch (Leftovers)",
                            "tasks": [
                                "Leftover Simple Pasta (150g from 1kg supply)",
                                "15 minutes of relaxing, NO study"
                            ],
                            "food": "üçΩÔ∏è Quick/Simple Lunch (Last of the planned pasta!)"
                        },
                        {
                            "time": "13:00-16:00",
                            "title": "üìê Math Prep Session",
                            "tasks": [
                                "Shift focus to Math (next week's exam)",
                                "Practice problems on calculator skills (3 hours total)"
                            ]
                        },
                        {
                            "time": "16:00-17:00",
                            "title": "üèãÔ∏è Light Exercise & Rest",
                            "tasks": [
                                "Go for a walk/short jog",
                                "Home exercise (30 min)"
                            ],
                            "note": "üí° Goal: Light exercise achieved!"
                        },
                        {
                            "time": "17:00-19:00",
                            "title": "Dinner & Prep",
                            "tasks": [
                                "Leftover Chicken meal (from Monday)",
                                "Prepare uniform for Friday shift"
                            ],
                            "food": "üçΩÔ∏è Leftover Chicken Meal (Portion control payoff!)"
                        },
                        {
                            "time": "19:00-22:00",
                            "title": "üìö Math Review/Free Time",
                            "tasks": [
                                "Final Math review session (1 hour)",
                                "Reduce screentime (scroll/leisure)"
                            ]
                        },
                        {
                            "time": "22:00-22:50",
                            "title": "üåô Evening Routine",
                            "tasks": [
                                "Shower",
                                "Brush teeth",
                                "Phone away 22:00!"
                            ]
                        },
                        {
                            "time": "22:50-23:00",
                            "title": "üó£Ô∏è Hindi Practice",
                            "tasks": [
                                "10 minutes of vocabulary review (Goal: 3/7)"
                            ]
                        },
                        {
                            "time": "23:00",
                            "title": "üò¥ Sleep",
                            "tasks": [
                                "Lights out at 23:00"
                            ]
                        }
                    ]
                },
                // FRIDAY, DECEMBER 12
                "friday": {
                    "date": "2025-12-12",
                    "title": "Friday December 12",
                    "subtitle": "Work Day - Morning Math Focus + Late Shift",
                    "motivation": "üí™ Late work shift. Get Math done first thing!",
                    "blocks": [
                        {
                            "time": "07:00-07:30",
                            "title": "üåÖ Morning Routine (30 min)",
                            "tasks": [
                                "Wake with alarm",
                                "Shower",
                                "Get ready"
                            ]
                        },
                        {
                            "time": "07:30-08:00",
                            "title": "üç≥ Breakfast",
                            "tasks": [
                                "Scrambled eggs (2 eggs)",
                                "Toast",
                                "Water"
                            ],
                            "food": "üçΩÔ∏è Eggs + toast (using LAST of the old eggs!)"
                        },
                        {
                            "time": "08:00-12:30",
                            "title": "üìê Math Study: Focused Practice",
                            "tasks": [
                                "Review past test papers/weak areas (2 hours)",
                                "Focus on any identified gaps"
                            ],
                            "note": "üí° Use this free morning for the exam next week!"
                        },
                        {
                            "time": "12:30-13:00",
                            "title": "üçù Lunch (Quick)",
                            "tasks": [
                                "Quick, easy meal (e.g., sandwich, instant noodles)",
                                "Eat Banana (5 of 5 new)"
                            ],
                            "food": "üçΩÔ∏è Quick Lunch"
                        },
                        {
                            "time": "13:00-16:44",
                            "title": "üìö Relax / Final Prep",
                            "tasks": [
                                "Light reading/music",
                                "Prepare uniform and bag for work"
                            ],
                            "note": "üí° No Web Dev today - saving energy for the shift."
                        },
                        {
                            "time": "16:44-16:57",
                            "title": "üö∂ Walk to Work",
                            "tasks": [
                                "13-minute walk",
                                "Arrive 16:57 for 17:00 start (3 min early!)"
                            ]
                        },
                        {
                            "time": "17:00-23:30",
                            "title": "üíº Work Shift: Nando's",
                            "tasks": [
                                "6.5-hour shift"
                            ],
                            "food": "üçΩÔ∏è Staff meal (FREE!)"
                        },
                        {
                            "time": "23:30-23:43",
                            "title": "üö∂ Walk Home",
                            "tasks": [
                                "13-minute walk"
                            ]
                        },
                        {
                            "time": "23:43-23:53",
                            "title": "üöø Quick Shower (10 min)",
                            "tasks": [
                                "Must shower after work!",
                                "Set alarms"
                            ],
                            "note": "‚ùå NO HINDI: 'Straight to Bed' rule enforced for late arrival."
                        },
                        {
                            "time": "23:53-00:00",
                            "title": "üò¥ Wind Down & Sleep",
                            "tasks": [
                                "Phone away",
                                "Lights out (later start due to late shift!)"
                            ]
                        }
                    ]
                },
                // SATURDAY, DECEMBER 13
                "saturday": {
                    "date": "2025-12-13",
                    "title": "Saturday December 13",
                    "subtitle": "Work Day - Focused Morning Goals",
                    "motivation": "üí™ New shift time: 16:00-22:00. Get Math review and goals done first!",
                    "blocks": [
                        {
                            "time": "07:00-07:30",
                            "title": "üåÖ Morning Routine (30 min)",
                            "tasks": [
                                "Wake with alarm",
                                "Shower",
                                "Get ready"
                            ]
                        },
                        {
                            "time": "07:30-08:00",
                            "title": "üç≥ Breakfast",
                            "tasks": [
                                "Scrambled eggs (2 eggs - from new pack)",
                                "Toast",
                                "Water"
                            ],
                            "food": "üçΩÔ∏è Eggs + toast (Using newly bought eggs!)"
                        },
                        {
                            "time": "08:00-12:00",
                            "title": "üìê Math Study Review",
                            "tasks": [
                                "Full practice test (timed 90 min)",
                                "Review errors immediately (90 min)",
                                "Total 4 hours of focused study"
                            ]
                        },
                        {
                            "time": "12:00-13:00",
                            "title": "üçù Lunch",
                            "tasks": [
                                "Quick, easy lunch",
                                "Water"
                            ],
                            "food": "üçΩÔ∏è Quick Lunch"
                        },
                        {
                            "time": "13:00-15:44",
                            "title": "üìö Chill / Get Ready",
                            "tasks": [
                                "Light reading or stretching",
                                "Prepare uniform and bag for work"
                            ]
                        },
                        {
                            "time": "15:44-15:57",
                            "title": "üö∂ Walk to Work",
                            "tasks": [
                                "13-minute walk",
                                "Arrive 15:57 for 16:00 start (3 min early!)"
                            ]
                        },
                        {
                            "time": "16:00-22:00",
                            "title": "üíº Work Shift: Nando's",
                            "tasks": [
                                "6-hour shift"
                            ],
                            "food": "üçΩÔ∏è Staff meal (FREE!)"
                        },
                        {
                            "time": "22:00-22:13",
                            "title": "üö∂ Walk Home",
                            "tasks": [
                                "13-minute walk"
                            ]
                        },
                        {
                            "time": "22:13-22:23",
                            "title": "üöø Quick Shower (10 min)",
                            "tasks": [
                                "Must shower after work!"
                            ]
                        },
                        {
                            "time": "22:50-23:00",
                            "title": "üó£Ô∏è Hindi Practice",
                            "tasks": [
                                "10 minutes of vocabulary review (Goal: 4/7)"
                            ]
                        },
                        {
                            "time": "23:00",
                            "title": "üò¥ Sleep",
                            "tasks": [
                                "Good rest"
                            ]
                        }
                    ]
                },
                // SUNDAY, DECEMBER 14
                "sunday": {
                    "date": "2025-12-14",
                    "title": "Sunday December 14",
                    "subtitle": "Work Day - Goals, Web Dev & Final Shift",
                    "motivation": "üéâ Use your morning for Web Dev goals, then crush the final shift of the week!",
                    "blocks": [
                        {
                            "time": "08:00-08:30",
                            "title": "üåÖ Morning Routine (30 min)",
                            "tasks": [
                                "Wake up, easy start",
                                "Shower",
                                "Get dressed"
                            ]
                        },
                        {
                            "time": "08:30-09:00",
                            "title": "üç≥ Breakfast",
                            "tasks": [
                                "Scrambled eggs (2 eggs - from new pack)",
                                "Toast with PB",
                                "Water"
                            ],
                            "food": "üçΩÔ∏è Eggs + toast (Using newly bought eggs!)"
                        },
                        {
                            "time": "09:00-13:00",
                            "title": "üíª Web Development Session (4 hours)",
                            "tasks": [
                                "Web dev project work (90 min)",
                                "Light exercise/scroll break (30 min)",
                                "Web dev project work (90 min)",
                                "Total 7 hours of 5-hour goal complete! (Goal Achieved!)"
                            ]
                        },
                        {
                            "time": "13:00-14:00",
                            "title": "üçù Lunch & Prep",
                            "tasks": [
                                "Quick, easy lunch (sandwich/soup)",
                                "Prepare uniform and bag for work"
                            ],
                            "food": "üçΩÔ∏è Quick Lunch"
                        },
                        {
                            "time": "14:00-16:14",
                            "title": "üìê Math Study / Gym Prep",
                            "tasks": [
                                "Light Math review for the coming week's classes",
                                "Organize notes",
                                "Prepare yourself for the gym (e.g., stretching, planning routine)"
                            ],
                            "note": "üí° All goals for the week achieved! (Web Dev, Hindi, Exercise)"
                        },
                        {
                            "time": "16:14-16:27",
                            "title": "üö∂ Walk to Work",
                            "tasks": [
                                "13-minute walk",
                                "Arrive 16:27 for 16:30 start (3 min early!)"
                            ]
                        },
                        {
                            "time": "16:30-23:30",
                            "title": "üíº Work Shift: Nando's",
                            "tasks": [
                                "7-hour shift"
                            ],
                            "food": "üçΩÔ∏è Staff meal (FREE!)"
                        },
                        {
                            "time": "23:30-23:43",
                            "title": "üö∂ Walk Home",
                            "tasks": [
                                "13-minute walk"
                            ]
                        },
                        {
                            "time": "23:43-23:53",
                            "title": "üöø Quick Shower (10 min)",
                            "tasks": [
                                "Must shower after work!",
                                "Set alarms for Monday"
                            ],
                            "note": "‚ùå NO HINDI: 'Straight to Bed' rule enforced for late arrival."
                        },
                        {
                            "time": "23:53-00:00",
                            "title": "üò¥ Wind Down & Sleep",
                            "tasks": [
                                "Lights out (later start due to late shift!)"
                            ]
                        }
                    ]
                }
            },
            "shopping": {
                "week_of": "2025-12-08",
                "shop_day": "Monday Dec 8",
                "shop_time": "09:30-10:30",
                "timing_note": "CRITICAL! Need items + Alarm Clock today!",
                "budget": "¬£5-20",
                "estimated_total": "¬£15.50",
                "reasoning": [
                    "Very low budget this week thanks to massive pasta and milk leftovers!",
                    "Using 8 leftover eggs for breakfasts (Mon-Fri). Need 6 new eggs for Sat/Sun/next week.",
                    "Using 300g of existing 1kg pasta supply (2 meals) = FREE carbs!",
                    "5 free staff meals this week!"
                ],
                "list": [
                    {
                        "item": "Alarm clock",
                        "quantity": "1",
                        "price": "¬£5-8",
                        "reason": "Crucial for reducing phone use and ensuring 07:00 wake-up goal."
                    },
                    {
                        "item": "Eggs",
                        "quantity": "6-pack",
                        "price": "~¬£1.50",
                        "reason": "Need 14 total for the week (7 breakfasts). Have 8 left, need to buy 6."
                    },
                    {
                        "item": "Bananas",
                        "quantity": "5",
                        "price": "~¬£1.00",
                        "reason": "All 7 from last week are gone. Need 5 for daily snacks."
                    },
                    {
                        "item": "Chicken Breast",
                        "quantity": "300g",
                        "price": "~¬£3.00",
                        "reason": "For 2 non-staff meal dinners (Mon, Thu)."
                    },
                    {
                        "item": "Bread loaf",
                        "quantity": "1",
                        "price": "~¬£1.00",
                        "reason": "Staple for toast/sandwiches. Assuming old one is finished."
                    }
                ],
                "skip_items": [
                    {
                        "item": "Pasta",
                        "quantity": "700g left",
                        "reason": "You have plenty (1kg!). Will use only ~300g this week."
                    },
                    {
                        "item": "Milk",
                        "quantity": "2 Litres left",
                        "reason": "Enough for cereal/tea for multiple weeks."
                    }
                ]
            },
            "recipes": {
                "scrambled_eggs": {
                    "name": "Quick Scrambled Eggs",
                    "difficulty": "Beginner",
                    "time": "5 minutes",
                    "servings": "1 serving (2 eggs)",
                    "ingredients": [
                        "2 eggs (from your supply!)",
                        "Splash of milk (you have 2L!)",
                        "Butter/Oil",
                        "Salt & Pepper"
                    ],
                    "instructions": [
                        "Beat 2 eggs with splash milk and seasoning",
                        "Melt butter/oil in pan medium heat",
                        "Pour eggs in",
                        "Scrape from the edges towards center (don't stir constantly!)",
                        "Cook until set but still moist (2-3 min)",
                        "Serve on toast"
                    ],
                    "video": "https://www.youtube.com/watch?v=PboC4pXyq_Q",
                    "notes": "üí° Perfect high-protein breakfast. Use your leftover eggs!"
                },
                "omelette": {
                    "name": "Simple Omelette",
                    "difficulty": "Beginner",
                    "time": "10 minutes",
                    "servings": "1 serving (2 eggs)",
                    "ingredients": [
                        "2 eggs (from your supply!)",
                        "Tiny bit milk",
                        "Salt",
                        "Oil for pan",
                        "Optional: chopped onion, carrots, whatever veg"
                    ],
                    "instructions": [
                        "Beat 2 eggs with splash milk and salt",
                        "Heat pan medium-high with bit of oil",
                        "Pour eggs in, let spread across pan",
                        "Cook 2 minutes without stirring",
                        "When edges set, add any veg on half",
                        "Fold omelette in half with spatula",
                        "Cook 1 more minute",
                        "Slide onto plate"
                    ],
                    "video": "https://www.youtube.com/watch?v=4RoLavF2ZLU",
                    "notes": "üí° Works great with your carrots or onions! Simple and filling."
                },
                "simple_pasta": {
                    "name": "Simple Pasta with Sauce",
                    "difficulty": "Beginner",
                    "time": "15 minutes",
                    "servings": "2 portions (eat half, save half!)",
                    "ingredients": [
                        "150g pasta (from your 1kg supply!)",
                        "1 tin tomato sauce (from shopping)",
                        "1 small onion chopped (you have 5!)",
                        "Bit of oil",
                        "Salt, any spices you have"
                    ],
                    "instructions": [
                        "Boil water in pot with pinch salt",
                        "Add 150g pasta, cook 8-10 min (read package)",
                        "Meanwhile: heat oil in pan, cook chopped onion 3 min",
                        "Add tomato sauce to onions, stir, heat through",
                        "Drain pasta, toss with sauce. Serve 1 portion, save 1 for next day."
                    ],
                    "video": "https://www.youtube.com/watch?v=F_fX2V7H47c",
                    "notes": "üí° Quick, cheap, and easy. Use your huge pasta stockpile. Make 2 portions - lunch today and tomorrow! Portion control!"
                },
                "chicken_pasta": {
                    "name": "Chicken Meal Prep (Rice/Veg)",
                    "difficulty": "Easy",
                    "time": "25 minutes",
                    "servings": "2 servings (eat half, save half!)",
                    "ingredients": [
                        "300g chicken breast (from shopping)",
                        "Rice or simple veg side",
                        "Sauce/spices (what you have)"
                    ],
                    "instructions": [
                        "Cook rice/veg in one pot/pan.",
                        "Cook chicken in a separate pan until done (approx 10-12 min).",
                        "Serve 150g chicken with half of the rice/veg.",
                        "Store the other half for the next non-work dinner."
                    ],
                    "video": "https://www.youtube.com/results?search_query=simple+chicken+and+rice+meal+prep",
                    "notes": "üí° Use your new chicken. Good post-study meal. Make two portions!"
                }
            },
            "history": {
                "week1": {
                    "period": "December 7-13, 2025 (Original Schedule)",
                    "shopping": {
                        "budget": "¬£22",
                        "items": ["Alarm clock (¬£5-8)", "Bread (¬£1)", "Tomato sauce (¬£0.80)", "Bananas x3 (¬£0.60)"]
                    },
                    "recipesUsed": [
                        "scrambled_eggs",
                        "omelette",
                        "simple_pasta",
                        "chicken_pasta",
                        "instant_noodles"
                    ],
                    "leftoverTracking": {
                        "eggs": "8",
                        "pasta": "1000g",
                        "milk": "2000ml",
                        "bananas": "0",
                        "bread": "0",
                        "chicken": "0"
                    },
                    "notes": "V2 system launched! The user had high leftovers from initial stock-up/purchases. Shopping was minimal."
                }
            }
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        // --- Core Functions (Keep Exactly As Is) ---

        function initializeApp() {
            renderSchedule();
            renderShopping();
            renderRecipes();
            setupNavigation();
            setupDayNavigation();
            setupCheckboxes();
            loadCheckboxStates();
            setupScrollToTop();
            calculateAndDisplayCountdowns();
            setInterval(calculateAndDisplayCountdowns, 60000); // Update countdowns every minute
            
            // Find today's day and activate its tab/content
            const today = new Date().getDay(); // 0 = Sunday, 1 = Monday, etc.
            const dayNames = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
            const todayName = dayNames[today];
            const todayTab = document.querySelector(`.day-tab[data-day="${todayName}"]`);
            
            // If the current day is in the displayed week (Dec 8-14 is Mon-Sun)
            const scheduleStartDay = new Date('2025-12-08').getDay(); // Monday = 1
            const scheduleEndDay = new Date('2025-12-14').getDay(); // Sunday = 0
            
            // Logic to determine which day to show by default (to avoid showing the wrong Sunday)
            let defaultDayName = 'monday'; // Default to Monday
            
            if (todayName === 'sunday' && new Date().getDate() === 14) {
                 defaultDayName = 'sunday';
            } else if (today >= scheduleStartDay || today === scheduleEndDay) {
                // If today is Mon (1) to Sat (6), use today's tab
                if (todayName !== 'sunday') {
                    defaultDayName = todayName;
                }
            }

            const defaultTab = document.querySelector(`.day-tab[data-day="${defaultDayName}"]`);
            
            // Remove active from all tabs first
            document.querySelectorAll('.day-tab').forEach(t => t.classList.remove('active'));
            
            // Activate the determined default tab
            if (defaultTab) {
                defaultTab.classList.add('active');
                showDay(defaultDayName);
                updateCurrentTimeHighlight(defaultDayName);
                autoScrollToCurrentTime();
            } else {
                // Fallback to the very first tab in the list (Monday)
                const firstTab = document.querySelector('.day-tabs .day-tab');
                if (firstTab) {
                    firstTab.classList.add('active');
                    showDay(firstTab.dataset.day);
                }
            }

        }


        function renderSchedule() {
            const container = document.getElementById('scheduleContent');
            let html = '';

            for (const dayName in scheduleData.days) {
                const day = scheduleData.days[dayName];
                html += `
                <div class="day-content" id="${dayName}Content">
                    <div class="day-header">
                        <h2>${day.title}</h2>
                        <div class="subtitle">${day.subtitle}</div>
                        <div class="motivation">${day.motivation}</div>
                    </div>
                `;

                day.blocks.forEach((block, index) => {
                    const blockId = `${dayName}-block-${index}`;
                    html += `
                    <div class="time-block" data-time="${block.time}">
                        <div class="time">${block.time}</div>
                        <div class="title">${block.title}</div>
                    `;

                    if (block.food) {
                        html += `<div class="food">${block.food}</div>`;
                    }
                    if (block.note) {
                        html += `<div class="note">${block.note}</div>`;
                    }

                    if (block.tasks && block.tasks.length > 0) {
                        html += '<div class="tasks">';
                        block.tasks.forEach((task, taskIndex) => {
                            const taskId = `${blockId}-task-${taskIndex}`;
                            html += `
                                <div class="task-item">
                                    <input type="checkbox" id="${taskId}">
                                    <label for="${taskId}">${task}</label>
                                </div>
                            `;
                        });
                        html += '</div>';
                    }

                    html += '</div>'; // End time-block
                });

                html += '</div>'; // End day-content
            }

            container.innerHTML = html;
        }


        function showDay(day) {
            document.querySelectorAll('.day-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${day}Content`).classList.add('active');
        }

        function renderShopping() {
            const container = document.getElementById('shoppingContent');
            const shopping = scheduleData.shopping;
            const predictions = scheduleData.metadata.foodInventory.predictedLeftovers;

            let html = `
                <div class="shopping-content">
                    <h2>üõí Shopping List - ${shopping.shop_day}</h2>
                    <div class="budget-info">
                        <h3>Budget: ${shopping.budget} (Estimated: ${shopping.estimated_total})</h3>
                        <div style="margin-top: 10px; font-size: 14px;">
                            <strong>‚è∞ Shopping Time:</strong> ${shopping.shop_time}<br>
                            <strong style="color: #e65100;">‚ö†Ô∏è ${shopping.timing_note}</strong>
                        </div>
                    </div>

                    <div class="shopping-section">
                        <h3>üß† Smart Shopping Strategy:</h3>
                        <ul>
                            ${shopping.reasoning.map(r => `<li>${r}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="shopping-section">
                        <h3>‚ú® What to Buy (Low-Cost List):</h3>
                    `;

            shopping.list.forEach(item => {
                html += `
                        <div class="shopping-item">
                            <div class="item-name">${item.item}</div>
                            <div class="item-quantity">Quantity: ${item.quantity}${item.price ? ` (~${item.price})` : ''}</div>
                            <div class="item-reason">${item.reason}</div>
                        </div>
                    `;
            });
            html += '</div><div class="shopping-section"><h3>‚úÖ Items You DON\'T Need (Using What You Have!):</h3>';

            shopping.skip_items.forEach(item => {
                html += `
                        <div class="skip-item">
                            <div class="item-name">${item.item}</div>
                            <div class="item-quantity">You have: ${item.quantity}</div>
                            <div class="item-reason">Reason: ${item.reason}</div>
                        </div>
                    `;
            });

            html += `
                    </div>

                    <div class="leftover-predictions">
                        <h3>üìä Estimated Leftovers for Next Week (Dec 15-21)</h3>
                        <p style="font-size: 14px; margin-bottom: 10px;">This is what we project you'll have left for next week's meal planning:</p>
                        <table class="predictions-table">
                            <thead>
                                <tr>
                                    <th>Item</th>
                                    <th>Status (Next Week Start)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>Eggs</td><td>${predictions.eggs}</td></tr>
                                <tr><td>Pasta</td><td>${predictions.pasta}</td></tr>
                                <tr><td>Milk</td><td>${predictions.milk}</td></tr>
                                <tr><td>Bananas</td><td>${predictions.bananas}</td></tr>
                                <tr><td>Chicken</td><td>${predictions.chicken}</td></tr>
                                <tr><td>Bread</td><td>${predictions.bread}</td></tr>
                            </tbody>
                        </table>
                        <div class="next-update">Next schedule and shopping list update needed by Dec 15!</div>
                    </div>
                </div>
            `;
            container.innerHTML = html;
        }

        function renderRecipes() {
            const container = document.getElementById('recipesContent');
            const recipes = scheduleData.recipes;
            let html = '<div class="recipes-content">';

            for (const recipeKey in recipes) {
                const recipe = recipes[recipeKey];
                html += `
                <div class="recipe-card">
                    <h3>${recipe.name}</h3>

                    <div class="recipe-meta">
                        <div class="meta-item">
                            <strong>Difficulty</strong>
                            <span>${recipe.difficulty}</span>
                        </div>
                        <div class="meta-item">
                            <strong>Time</strong>
                            <span>${recipe.time}</span>
                        </div>
                        <div class="meta-item">
                            <strong>Servings</strong>
                            <span>${recipe.servings}</span>
                        </div>
                    </div>

                    <div class="ingredients">
                        <h4>Ingredients</h4>
                        <ul>
                            ${recipe.ingredients.map(i => `<li>${i}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="instructions">
                        <h4>Instructions</h4>
                        <ol>
                            ${recipe.instructions.map(i => `<li>${i}</li>`).join('')}
                        </ol>
                    </div>

                    <div class="recipe-notes">${recipe.notes}</div>

                    <div class="recipe-video">
                        <a href="${recipe.video}" target="_blank">Watch Recipe Video üé¨</a>
                    </div>
                </div>
                `;
            }

            html += '</div>';
            container.innerHTML = html;
        }

        function setupNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            const contents = document.querySelectorAll('.content');

            navItems.forEach(item => {
                item.addEventListener('click', () => {
                    const tab = item.dataset.tab;

                    // Remove active from all
                    navItems.forEach(n => n.classList.remove('active'));
                    contents.forEach(c => c.classList.remove('active'));

                    // Add active to clicked item and content
                    item.classList.add('active');
                    document.getElementById(tab + 'Content').classList.add('active');
                });
            });
        }

        function setupDayNavigation() {
            const tabs = document.querySelectorAll('.day-tab');
            const prevBtn = document.getElementById('prevDay');
            const nextBtn = document.getElementById('nextDay');
            const dayArray = Array.from(tabs);

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const day = tab.dataset.day;
                    showDay(day);

                    // Remove active from all tabs
                    tabs.forEach(t => t.classList.remove('active'));
                    // Add active to clicked tab
                    tab.classList.add('active');

                    // Update current time highlighting for this day
                    updateCurrentTimeHighlight(day);

                    // Update button states
                    currentIndex = dayArray.findIndex(t => t.classList.contains('active'));
                    updateNavButtons(currentIndex, dayArray.length);
                });
            });

            // Arrow navigation
            let currentIndex = dayArray.findIndex(t => t.classList.contains('active'));
            if (currentIndex === -1) currentIndex = 0; // Default to first day

            prevBtn.addEventListener('click', () => {
                if (currentIndex > 0) {
                    currentIndex--;
                    dayArray[currentIndex].click();
                }
            });

            nextBtn.addEventListener('click', () => {
                if (currentIndex < dayArray.length - 1) {
                    currentIndex++;
                    dayArray[currentIndex].click();
                }
            });

            function updateNavButtons(index, total) {
                prevBtn.disabled = (index === 0);
                nextBtn.disabled = (index === total - 1);
                
                // Also scroll the tabs container to keep the active tab centered
                const activeTab = dayArray[index];
                const container = document.querySelector('.day-tabs-container');
                const scrollPos = activeTab.offsetLeft - container.offsetWidth / 2 + activeTab.offsetWidth / 2;
                container.scrollTo({
                    left: scrollPos,
                    behavior: 'smooth'
                });
            }

            // Initial button state
            updateNavButtons(currentIndex, dayArray.length);
        }

        function setupCheckboxes() {
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                // Ensure unique IDs for all checkboxes for local storage
                if (!checkbox.id) {
                    let parentBlock = checkbox.closest('.time-block');
                    let dayContent = checkbox.closest('.day-content');
                    if (parentBlock && dayContent) {
                        let day = dayContent.id.replace('Content', '');
                        let blockTime = parentBlock.dataset.time.replace(/[^a-zA-Z0-9]/g, '');
                        let taskIndex = Array.from(parentBlock.querySelectorAll('input[type="checkbox"]')).indexOf(checkbox);
                        checkbox.id = `${day}-${blockTime}-task-${taskIndex}`;
                        checkbox.nextElementSibling.setAttribute('for', checkbox.id);
                    }
                }
                
                checkbox.addEventListener('change', (event) => {
                    saveCheckboxState(event.target.id, event.target.checked);
                });
            });
        }

        function calculateAndDisplayCountdowns() {
            const now = new Date();
            const englishEl = document.getElementById('englishCountdown');
            const mathEl = document.getElementById('mathCountdown');
            const englishDate = new Date(scheduleData.exams.english.date);
            const mathDate = new Date(scheduleData.exams.math.date);

            const formatCountdown = (targetDate, element) => {
                const diff = targetDate.getTime() - now.getTime();
                if (diff > 0) {
                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    element.textContent = `${days}d ${hours}h`;
                } else {
                    element.textContent = 'Completed! üéâ';
                }
            };

            // English Exam (Dec 11) is in the past now (assuming it's after the user is asking for the update)
            if (englishDate.getTime() < now.getTime() && englishEl) {
                englishEl.textContent = 'Completed! üéâ';
            } else if (englishEl) {
                 formatCountdown(englishDate, englishEl);
            }

            // Math Exam (Dec 16)
            if (mathEl) {
                formatCountdown(mathDate, mathEl);
            }
        }


        function updateCurrentTimeHighlight(dayName) {
            const now = new Date();
            const blocks = document.querySelectorAll(`#${dayName}Content .time-block`);
            
            blocks.forEach(block => {
                block.classList.remove('current-time', 'past-time');
                
                const timeStr = block.dataset.time; // e.g., "17:00-23:30"
                const [startTimeStr, endTimeStr] = timeStr.split('-');
                
                // Helper to convert HH:MM to minutes since midnight
                const timeToMinutes = (t) => {
                    if (!t) return 0;
                    const [h, m] = t.split(':').map(Number);
                    return (h * 60) + m;
                };

                const currentTimeInMinutes = (now.getHours() * 60) + now.getMinutes();
                let startTimeInMinutes = timeToMinutes(startTimeStr);
                let endTimeInMinutes = timeToMinutes(endTimeStr);

                // Handle times that cross midnight (e.g., 23:30-00:00)
                if (endTimeInMinutes < startTimeInMinutes) {
                    endTimeInMinutes += (24 * 60); // Add a day's worth of minutes
                    // We only check if current time is within this block if the day is 'today'
                    // For highlighting logic, we assume all blocks are relative to the start of the day.
                    // The time check handles the rollover naturally if we adjust the 'now' time logic for cross-midnight.
                    // For simplicity, we just check relative to the day on display.
                }

                // If end time is missing (e.g., "23:00"), assume 1 hour duration.
                if (!endTimeStr) {
                    endTimeInMinutes = startTimeInMinutes + 60; // Default 1 hour
                }
                
                // Logic to highlight only if the user is currently viewing today's schedule
                const today = new Date().getDay();
                const dayNames = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
                const currentDayName = dayNames[today];
                
                if (currentDayName === dayName) {
                    // Adjust current time if checking a past day of a cross-midnight block
                    let checkCurrentTime = currentTimeInMinutes;

                    // If the block crosses midnight (e.g., 23:30 - 00:00) and it's the next day
                    // This logic is complex for general scheduling and can be simplified:

                    if (currentTimeInMinutes >= startTimeInMinutes && currentTimeInMinutes < endTimeInMinutes) {
                        block.classList.add('current-time');
                    } else if (currentTimeInMinutes >= endTimeInMinutes) {
                        block.classList.add('past-time');
                    }
                }
            });
        }

        function autoScrollToCurrentTime() {
            const now = new Date();
            const dayNames = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
            const todayName = dayNames[now.getDay()]; 

            // Only auto-scroll if viewing today
            const activeTab = document.querySelector('.day-tab.active');
            if (activeTab && activeTab.dataset.day === todayName) {
                updateCurrentTimeHighlight(todayName);

                // Scroll to current time block
                const currentBlock = document.querySelector('.time-block.current-time');
                if (currentBlock) {
                    currentBlock.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
            }
        }


        function setupScrollToTop() {
            const scrollBtn = document.getElementById('scrollTop');
            
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    scrollBtn.classList.add('visible');
                } else {
                    scrollBtn.classList.remove('visible');
                }
            });
            
            scrollBtn.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }

        function saveCheckboxState(id, checked) {
            localStorage.setItem(id, checked);
        }

        function loadCheckboxStates() {
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                const saved = localStorage.getItem(checkbox.id);
                if (saved === 'true') {
                    checkbox.checked = true;
                }
            });
        }
    </script>
</body>
</html>
